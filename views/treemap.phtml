<style type="text/css">
.ecw-query-input {
    background: #fff;
    border: 1px solid rgb(0, 181, 228);
    box-shadow: none;
    font-size: 18px;
    padding: 25px;
}
.ecw-btn-classify {
    background: rgb(0, 181, 228);
    padding: 25px;
    margin-left: 25px;
    border-radius: 5px;
}
.ecw-controls label {
    display: none;
}
.input-line {
    position: relative;
}
.video-url-display {
    font-size: 12px;
    position: absolute;
    z-index: 900;
    margin-left: 5px;
}
</style>

<div class="ecw-mask">
    <div class="ecw-loading-screen ecw-mask-asset">
        Loading...
        <div class="ecw-loading-spinner"></div>
    </div>
    <div class="ecw-dialog ecw-mask-asset">
        <div class="ecw-dialog-close">CLOSE</div>
        <span id="ecw-dialog-text">Dialog Text</span>
        <div><button class="ecw-button-dismiss" id="ecw-button-dismiss">Dismiss</button></div>
    </div>
</div>

<?php $videoList = array (
    0 => [
        'url' => 'https://www.youtube.com/watch?v=jcgejC5prIY',
        'title' => 'Cleanup Underway After \'Bomb Cyclone\' Slammed West Coast With Heavy Rain, Wind, Mudslides',
    ],
    1 => [
        'url' => 'https://www.youtube.com/watch?v=i6sonKa2-NE',
        'title' => 'Nightly News Full Broadcast - October 23rd'
    ]
);

?>

<div class="ecw-container">
    <div class="ecw-controls">
        <ul class="tabs">
            <li class="tab-item active" data-show-id="ecw-query-url">URL</li>
            <li class="tab-item" data-show-id="ecw-query-twitter">Twitter</li>
            <li class="tab-item" data-show-id="ecw-query-paste">Text</li>
            <?php if (preg_match('/try/i', get_permalink())): ?>
            <li class="tab-item" data-show-id="ecw-query-video">Video</li>
            <?php endif; ?>
            <li class="tab-item" data-show-id="ecw-query-video">Video</li>
        </ul>
        <div class="panel active" id="ecw-query-url">
            <div class="input-line">
                <label for="ecw-query-input" class="ecw-control-item">Enter a username or topic:</label>
                <input type="text" data-classify-type="url" name="ecw-query-input" class="ecw-control-item ecw-query-input" data-default-value="https://en.wikipedia.org/wiki/National_park" placeholder="Type here..." value="https://en.wikipedia.org/wiki/National_park">
                <button id="ecw-btn-classify-url" class="ecw-control-item ecw-btn-classify">Classify</button>
            </div>
        </div>
        <div class="panel" id="ecw-query-twitter">
            <div class="input-line">
                <label for="ecw-query-input" class="ecw-control-item">Enter a username or topic:</label>
                <input type="text" data-classify-type="user" name="ecw-query-input" class="ecw-control-item ecw-query-input" data-default-value="@reuters" placeholder="Type here..." value="@reuters">
                <button id="ecw-btn-classify-twitter" class="ecw-control-item ecw-btn-classify">Classify</button>
            </div>
        </div>
        <div class="panel" id="ecw-query-paste">
            <div class="input-textarea">
                <textarea type="text" data-classify-type="text" name="ecw-query-input" class="ecw-control-item ecw-query-input" data-default-value="The Red Cross What We Do: The American Red Cross exists to provide compassionate care to those in need. Our network of generous donors, volunteers and employees share a mission of preventing and relieving suffering, here at home and around the world, through five key service areas: Disaster Relief The Red Cross responds to approximately 64,000 disasters in the United States every year, ranging from home fires that affect a single family to hurricanes that affect tens of thousands, to earthquakes that impact millions. In these events, the Red Cross provides shelter, food, health and mental health services to help families and entire communities get back on their feet. Although the Red Cross is not a government agency, it is an essential part of the response when disaster strikes. We work in partnership with other agencies and organizations that provide services to disaster victims. Supporting America’s Military Families The Red Cross helps military members, veterans and their families prepare for, cope with, and respond to the challenges of military service. Emergency communications, training, support to wounded warriors and veterans, and access to community resources help an average of 150,000 military families and veterans annually. Lifesaving Blood Your donations of blood are what make the American Red Cross the largest single supplier of blood and blood products in the U.S. Each year, nearly 4 million people donate blood through the Red Cross, helping to provide more than 40% of America’s blood supply. Health and Safety Services The Red Cross is the nation’s leading provider of health and safety courses, such as CPR, First Aid and Lifeguard training. Each year, more than 9 million Americans participate in our training programs, including first responders, educators, babysitters, and people who want to be prepared to help others in an emergency. International Services The American Red Cross is part of the world’s largest humanitarian network with 13 million volunteers in 187 countries. Working together, we help respond to disasters, build safer communities, and teach the rules of war. Each year, we reach an average of more than 100 million people across the globe." placeholder="Please paste your text here...">The Red Cross What We Do: The American Red Cross exists to provide compassionate care to those in need. Our network of generous donors, volunteers and employees share a mission of preventing and relieving suffering, here at home and around the world, through five key service areas: Disaster Relief The Red Cross responds to approximately 64,000 disasters in the United States every year, ranging from home fires that affect a single family to hurricanes that affect tens of thousands, to earthquakes that impact millions. In these events, the Red Cross provides shelter, food, health and mental health services to help families and entire communities get back on their feet. Although the Red Cross is not a government agency, it is an essential part of the response when disaster strikes. We work in partnership with other agencies and organizations that provide services to disaster victims. Supporting America’s Military Families The Red Cross helps military members, veterans and their families prepare for, cope with, and respond to the challenges of military service. Emergency communications, training, support to wounded warriors and veterans, and access to community resources help an average of 150,000 military families and veterans annually. Lifesaving Blood Your donations of blood are what make the American Red Cross the largest single supplier of blood and blood products in the U.S. Each year, nearly 4 million people donate blood through the Red Cross, helping to provide more than 40% of America’s blood supply. Health and Safety Services The Red Cross is the nation’s leading provider of health and safety courses, such as CPR, First Aid and Lifeguard training. Each year, more than 9 million Americans participate in our training programs, including first responders, educators, babysitters, and people who want to be prepared to help others in an emergency. International Services The American Red Cross is part of the world’s largest humanitarian network with 13 million volunteers in 187 countries. Working together, we help respond to disasters, build safer communities, and teach the rules of war. Each year, we reach an average of more than 100 million people across the globe.</textarea><br />
                <button id="ecw-btn-classify-paste" class="ecw-control-item ecw-btn-classify" style="margin-left: 0px; margin-top: 5px;">Classify</button>
            </div>
        </div>
        <div class="panel" id="ecw-query-video">
            <div class="video-url-display" id="video-label"></div>
            <form method="get" action="http://staging.econtext.ai/enrich/content-explorer/video" id="video-form">
                <div class="input-line">
                    <label for="ecw-query-input" class="ecw-control-item">Select a YouTube Video:</label>
                    <select class="ecw-control-item ecw-query-input" id="video-url-selector" data-classify-type="video" name="q">
                        <?php foreach ($videoList as $id => $listItem): ?>
                        <option value="<?php echo $listItem['url']; ?>"><?php echo $listItem['title']; ?></option>
                        <?php endforeach; ?>
                    </select>
                    <button id="ecw-btn-classify-url" class="ecw-control-item ecw-btn-classify">Classify</button>
                </div>
            </form>
        </div>
    </div>
    <?php if (!$this->app->session()->get('solved_captcha')): ?>
        <div class="g-recaptcha" data-sitekey="<?php echo getenv('GOOGLE_RECAPTCHA_SITEKEY'); ?>"></div>
    <?php endif; ?>
    <div id="ecw-chart-controls">&nbsp;</div>
    <div id="ecw-canvas"></div>
    <div id="ecw-status"></div>
    <div id="ecw-tweets">
        <div class="tweet" v-for="tweet in tweets">
            <img class="profile-pic" :src="largerProfilePic(tweet.user.profile_image_url)">
            <div class="tweet-body">
                <span class="name">{{ tweet.user.name }}</span>
                <span class="screen-name">@{{ tweet.user.screen_name }}</span>
                <span class="text" v-html="textWithUrls(tweet)"></span>
                <div class="created-at">Posted on {{ formatDate(tweet.created_at) }}</div>
            </div>
        </div>
    </div>
    <div id="ecw-categories" class="ecw-cbc-block" v-show="categories">
        <h2 class="block-title"><span style="float: right; font-size: 12px;">% Content</span>Top Categories</h2>
        <table class="ecw-cbc-table">
            <tr v-for="category in categories">
                <td class="category-name">
                    <div class="category-path" v-if="showPath(category.path)">{{ showPath(category.path) }}</div>
                    {{ category.name }}
                </td>
                <td class="content-score">{{ Math.ceil(category.score * 100) }}%</td>
            </tr>
        </table>
    </div>
</div>

<script type="text/javascript" src="<?php echo $this->getDirUrl('js/widget-treemap.js'); ?>"></script>
<script type="text/javascript">
    jQuery("#video-label").html(jQuery("#video-url-selector").val());
    jQuery("#video-url-selector").change(function(e) {
        jQuery("#video-label").html(jQuery("#video-url-selector").val());
    });
</script>